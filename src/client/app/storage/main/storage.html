<div class="layout__header">
    <header></header>
</div>

<div class="storage">
    <div class="storage__plans">
        <div class="storage__header">
            <span class="font__center">Выберите тарифный план</span>
        </div>
        <div class="storage__content">


            <div class="storage__item"
                 ng-repeat="tariff in vm.tariff.items"
                 ng-class="{'is-check': vm.tariff.selected === tariff}">
                <label ng-click="vm.createQuota(tariff)">
                    <div class="storage__space-pie"
                         ng-class="{'storage__space-pie--yellow-orange': $index === 0,
                                'storage__space-pie--light-blue': $index === 1,
                                'storage__space-pie--blue': $index === 2}">
                        <span class="storage__volume-text">{{ tariff.name }}</span>
                    </div>
                    <div class="storage__plan-price">{{ tariff.price }} Kč</div>
                    <div class="storage__chose-plan">
                        <span class="icon-check-box-mark"></span>
                    </div>
                    <!--{{ tariff.isCheck }}-->
                    <input style="display: none" name="tariff" type="radio" ng-model="vm.tariff.selected"
                           ng-value="tariff">
                </label>
            </div>

            <div class="radiobutton main-switch radiobutton--size_l width--size168 mrg__top30" ng-if="vm.tariff.selected">
                <input class="main-switch__input"
                       type="radio"
                       name="payType"
                       value="sms"
                       ng-model="vm.payType">
                <span class="radiobutton--size_l main-switch__btn main-switch__btn--firs width--inh">SMS</span>
                <input class="main-switch__input"
                       type="radio"
                       name="payType"
                       value="paypal"
                       ng-model="vm.payType">
                <span class="radiobutton--size_l main-switch__btn main-switch__btn--last width--inh">PayPal</span>
            </div>

        </div>

        <div class="storage__footer" ng-if="vm.payType === 'sms' && vm.tariff.selected">
            <span class="font__center mrg__top15">Pro rozšíření o<b>&nbsp;1 GB &nbsp;</b>pošlete SMS ve tvaru<b> {{ vm.quota.result.code }}&nbsp;</b>na telefonní číslo {{ vm.tariff.selected.phone }}. Cena je {{ vm.tariff.selected.price }} Kč.</span>
        </div>

        <div class="storage__footer" ng-if="vm.payType === 'paypal' && vm.tariff.selected">
            <div class="mrg__top30">
                <paypal-button amount="vm.tariff.selected.price"></paypal-button>
            </div>
        </div>

        <!--        <div ng-if="vm.payType === 'sms' && vm.tariff.selected">
                    <form name="smsForm" ng-submit="vm.setSms()" novalidate>
                        <input class="input input&#45;&#45;size_l"
                               type="text"
                               ng-model="vm.smsForm.model.code">
                        <button>Подтвердить</button>
                    </form>
                </div>-->

    </div>
    <div class="storage__now-space">
        <div class="storage__header">
            <span>Мое место</span>
        </div>
        <div class="storage__content">

            <div class="storage__now-item">
                <div class="storage__space-pie pie storage__space-pie--my-space mrg__auto">
                </div>
                <div class="storage__footer">
                    <div class="storage__footer-content">
                        400 MB
                        <span class="font__size15">Свободно</span>
                        <div class="storage__hr "></div>
                    </div>

                    <div class="storage__footer-content storage__footer-content--green">
                        600 MB
                        <span class=" font__size15">Использовано</span>
                    </div>

                    <!-- скрипт для заполнения окружностей-->
                    <script>
                        function $$(selector, context) {
                            context = context || document;
                            var elements = context.querySelectorAll(selector);
                            return Array.prototype.slice.call(elements);
                        }

                        $$('.storage__space-pie--my-space').forEach(function (pie) {
                            var spaceDisk = 60;
                            pie.style.animationDelay = '-' + parseFloat(spaceDisk) + 's';
                        });
                        console.log('eror');
                    </script>
                    <!--  end-->

                </div>
            </div>
        </div>
    </div>
</div>
